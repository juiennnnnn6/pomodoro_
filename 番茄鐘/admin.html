<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>番茄鐘 - 管理後台</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="app.js"></script>
    <style>
        /* 後台特定樣式 */
        .admin-layout {
            display: flex;
            min-height: 100vh;
        }
        
        .admin-sidebar {
            width: 250px;
            background-color: var(--dark-color);
            color: white;
            padding: 20px 0;
            flex-shrink: 0;
        }
        
        .admin-logo {
            display: flex;
            align-items: center;
            padding: 0 20px;
            margin-bottom: 30px;
        }
        
        .admin-logo-icon {
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 20px;
        }
        
        .admin-logo-text {
            font-size: 18px;
            font-weight: 500;
        }
        
        .admin-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .admin-menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .admin-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .admin-menu-item.active {
            background-color: var(--primary-color);
        }
        
        .admin-menu-icon {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        .admin-content {
            flex: 1;
            padding: 20px;
            background-color: var(--background-color);
            overflow-y: auto;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--gray-3);
        }
        
        .admin-title {
            font-size: 24px;
            font-weight: 500;
        }
        
        .admin-user {
            display: flex;
            align-items: center;
        }
        
        .admin-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        
        .admin-username {
            margin-right: 15px;
        }
        
        .admin-logout {
            color: var(--error-color);
            cursor: pointer;
        }
        
        .admin-card {
            background-color: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .admin-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .admin-card-title {
            font-size: 18px;
            font-weight: 500;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .admin-stat-card {
            background-color: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: 20px;
            display: flex;
            align-items: center;
        }
        
        .admin-stat-icon {
            width: 50px;
            height: 50px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: white;
        }
        
        .admin-stat-icon.users {
            background-color: var(--primary-color);
        }
        
        .admin-stat-icon.tasks {
            background-color: var(--secondary-color);
        }
        
        .admin-stat-icon.pomodoros {
            background-color: var(--warning-color);
        }
        
        .admin-stat-icon.active {
            background-color: var(--success-color);
        }
        
        .admin-stat-content {
            flex: 1;
        }
        
        .admin-stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .admin-stat-label {
            font-size: 14px;
            color: var(--gray-1);
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th,
        .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--gray-3);
        }
        
        .admin-table th {
            font-weight: 500;
            color: var(--gray-1);
            background-color: var(--gray-5);
        }
        
        .admin-table tr:hover {
            background-color: var(--gray-5);
        }
        
        .admin-table-actions {
            display: flex;
            gap: 10px;
        }
        
        .admin-action-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--gray-5);
            color: var(--gray-1);
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .admin-action-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .admin-action-btn.delete:hover {
            background-color: var(--error-color);
        }
        
        .admin-pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .admin-pagination-item {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .admin-pagination-item:hover {
            background-color: var(--gray-4);
        }
        
        .admin-pagination-item.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        /* 深色模式 */
        body.dark-mode .admin-content {
            background-color: #121212;
        }
        
        body.dark-mode .admin-card,
        body.dark-mode .admin-stat-card {
            background-color: #1e1e1e;
            color: var(--gray-4);
        }
        
        body.dark-mode .admin-table th {
            background-color: #2a2a2a;
            color: var(--gray-4);
        }
        
        body.dark-mode .admin-table td {
            border-bottom-color: #2a2a2a;
        }
        
        body.dark-mode .admin-table tr:hover {
            background-color: #2a2a2a;
        }
        
        body.dark-mode .admin-action-btn {
            background-color: #2a2a2a;
            color: var(--gray-4);
        }
        
        /* 深色模式下的表單元素 */
        body.dark-mode .admin-search-input,
        body.dark-mode .admin-filter-select,
        body.dark-mode .settings-input,
        body.dark-mode .settings-textarea,
        body.dark-mode .settings-select {
            background-color: #2a2a2a;
            border-color: #5F6368;
            color: var(--gray-4);
        }
        
        /* 深色模式下的徽章 */
        body.dark-mode .admin-badge {
            background-color: #3C4043;
        }
        
        body.dark-mode .admin-badge.active {
            background-color: var(--success-color);
        }
        
        body.dark-mode .admin-badge.inactive {
            background-color: var(--gray-1);
        }
        
        body.dark-mode .admin-badge.social {
            background-color: var(--primary-color);
        }
        
        body.dark-mode .admin-badge.completed {
            background-color: var(--success-color);
        }
        
        body.dark-mode .admin-badge.in-progress {
            background-color: var(--warning-color);
        }
        
        body.dark-mode .admin-badge.pending {
            background-color: var(--gray-1);
        }
        
        body.dark-mode .admin-badge.info {
            background-color: var(--primary-color);
        }
        
        body.dark-mode .admin-badge.warning {
            background-color: var(--warning-color);
        }
        
        body.dark-mode .admin-badge.error {
            background-color: var(--error-color);
        }
        
        /* 深色模式下的設置項 */
        body.dark-mode .settings-section-title {
            color: var(--gray-4);
        }
        
        body.dark-mode .settings-item-label {
            color: var(--gray-4);
        }
        
        .admin-dark-mode-toggle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--gray-5);
            color: var(--gray-1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .admin-dark-mode-toggle:hover {
            background-color: var(--gray-3);
        }
        
        body.dark-mode .admin-dark-mode-toggle {
            background-color: #3C4043;
            color: #E8EAED;
        }
        
        body.dark-mode .admin-dark-mode-toggle:hover {
            background-color: #5F6368;
        }
        
        /* 模態框樣式 */
        .admin-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .admin-modal-content {
            background-color: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .admin-modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--gray-3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-modal-header h2 {
            font-size: 20px;
            font-weight: 500;
            margin: 0;
        }
        
        .admin-modal-close {
            font-size: 24px;
            color: var(--gray-1);
            cursor: pointer;
            line-height: 1;
        }
        
        .admin-modal-body {
            padding: 20px;
        }
        
        .admin-modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--gray-3);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        /* 詳情項樣式 */
        .admin-detail-item {
            display: flex;
            margin-bottom: 15px;
        }
        
        .admin-detail-label {
            width: 120px;
            font-weight: 500;
            color: var(--gray-1);
            flex-shrink: 0;
        }
        
        .admin-detail-value {
            flex: 1;
        }
        
        /* 深色模式下的模態框樣式 */
        body.dark-mode .admin-modal-content {
            background-color: #1e1e1e;
            color: var(--gray-4);
        }
        
        body.dark-mode .admin-modal-header {
            border-bottom-color: #5F6368;
        }
        
        body.dark-mode .admin-modal-footer {
            border-top-color: #5F6368;
        }
        
        body.dark-mode .admin-modal-close {
            color: var(--gray-4);
        }
        
        body.dark-mode .admin-detail-label {
            color: var(--gray-3);
        }
        
        /* 禁用的分頁按鈕樣式 */
        .admin-pagination-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .admin-pagination-item.disabled:hover {
            background-color: transparent;
        }
        
        @media (max-width: 768px) {
            .admin-layout {
                flex-direction: column;
            }
            
            .admin-sidebar {
                width: 100%;
                padding: 10px 0;
            }
            
            .admin-menu-item {
                padding: 10px 15px;
            }
            
            .admin-content {
                padding: 15px;
            }
            
            .admin-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- 側邊欄 -->
        <div class="admin-sidebar">
            <div class="admin-logo">
                <div class="admin-logo-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="admin-logo-text">番茄鐘管理後台</div>
            </div>
            
            <ul class="admin-menu">
                <li class="admin-menu-item active" data-page="dashboard">
                    <span class="admin-menu-icon"><i class="fas fa-tachometer-alt"></i></span>
                    <span>儀表板</span>
                </li>
                <li class="admin-menu-item" data-page="users">
                    <span class="admin-menu-icon"><i class="fas fa-users"></i></span>
                    <span>用戶管理</span>
                </li>
                <li class="admin-menu-item" data-page="tasks">
                    <span class="admin-menu-icon"><i class="fas fa-tasks"></i></span>
                    <span>任務管理</span>
                </li>
                <li class="admin-menu-item" data-page="stats">
                    <span class="admin-menu-icon"><i class="fas fa-chart-bar"></i></span>
                    <span>統計分析</span>
                </li>
                <li class="admin-menu-item" data-page="settings">
                    <span class="admin-menu-icon"><i class="fas fa-cog"></i></span>
                    <span>系統設置</span>
                </li>
                <li class="admin-menu-item" data-page="logs">
                    <span class="admin-menu-icon"><i class="fas fa-history"></i></span>
                    <span>系統日誌</span>
                </li>
            </ul>
        </div>
        
        <!-- 主要內容 -->
        <div class="admin-content">
            <div class="admin-header">
                <h1 class="admin-title">儀表板</h1>
                <div class="admin-user">
                    <div class="admin-dark-mode-toggle" id="darkModeToggle">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="admin-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span class="admin-username">管理員</span>
                    <span class="admin-logout" id="adminLogout"><i class="fas fa-sign-out-alt"></i> 登出</span>
                </div>
            </div>
            
            <!-- 儀表板內容 -->
            <div id="dashboard-content">
                <!-- 統計卡片 -->
                <div class="admin-stats">
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon users">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">125</div>
                            <div class="admin-stat-label">總用戶數</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon tasks">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">348</div>
                            <div class="admin-stat-label">總任務數</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon pomodoros">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">1,254</div>
                            <div class="admin-stat-label">完成的番茄鐘</div>
                        </div>
                    </div>
                    
                    <div class="admin-stat-card">
                        <div class="admin-stat-icon active">
                            <i class="fas fa-user-clock"></i>
                        </div>
                        <div class="admin-stat-content">
                            <div class="admin-stat-value">28</div>
                            <div class="admin-stat-label">今日活躍用戶</div>
                        </div>
                    </div>
                </div>
                
                <!-- 最近註冊用戶 -->
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">最近註冊用戶</h2>
                        <button class="btn btn-outline">查看全部</button>
                    </div>
                    
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>名稱</th>
                                <th>電子郵件</th>
                                <th>註冊時間</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>user_1234</td>
                                <td>張小明</td>
                                <td>zhang@example.com</td>
                                <td>2023-05-15 14:30</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>user_1235</td>
                                <td>李小華</td>
                                <td>li@example.com</td>
                                <td>2023-05-14 09:45</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>user_1236</td>
                                <td>王大力</td>
                                <td>wang@example.com</td>
                                <td>2023-05-13 16:20</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>user_1237</td>
                                <td>陳小芳</td>
                                <td>chen@example.com</td>
                                <td>2023-05-12 11:10</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>user_1238</td>
                                <td>林小雨</td>
                                <td>lin@example.com</td>
                                <td>2023-05-11 08:55</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- 最近完成的任務 -->
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">最近完成的任務</h2>
                        <button class="btn btn-outline">查看全部</button>
                    </div>
                    
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>任務名稱</th>
                                <th>用戶</th>
                                <th>完成時間</th>
                                <th>番茄鐘數</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>task_2345</td>
                                <td>完成網頁設計項目</td>
                                <td>張小明</td>
                                <td>2023-05-15 16:30</td>
                                <td>4</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>task_2346</td>
                                <td>學習JavaScript基礎</td>
                                <td>李小華</td>
                                <td>2023-05-15 15:45</td>
                                <td>3</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>task_2347</td>
                                <td>準備期末考試</td>
                                <td>王大力</td>
                                <td>2023-05-15 14:20</td>
                                <td>5</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>task_2348</td>
                                <td>整理工作文檔</td>
                                <td>陳小芳</td>
                                <td>2023-05-15 13:10</td>
                                <td>2</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>task_2349</td>
                                <td>閱讀專業書籍</td>
                                <td>林小雨</td>
                                <td>2023-05-15 11:55</td>
                                <td>3</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- 用戶管理內容 -->
            <div id="users-content" style="display: none;">
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">用戶管理</h2>
                        <button class="btn btn-primary">新增用戶</button>
                    </div>
                    
                    <div class="admin-search">
                        <input type="text" class="admin-search-input" placeholder="搜索用戶...">
                        <button class="admin-search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <div class="admin-filters">
                        <select class="admin-filter-select">
                            <option value="">註冊方式</option>
                            <option value="email">電子郵件</option>
                            <option value="google">Google</option>
                            <option value="facebook">Facebook</option>
                            <option value="apple">Apple</option>
                        </select>
                        
                        <select class="admin-filter-select">
                            <option value="">狀態</option>
                            <option value="active">活躍</option>
                            <option value="inactive">非活躍</option>
                        </select>
                        
                        <select class="admin-filter-select">
                            <option value="">註冊時間</option>
                            <option value="today">今天</option>
                            <option value="week">本週</option>
                            <option value="month">本月</option>
                            <option value="year">今年</option>
                        </select>
                    </div>
                    
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>名稱</th>
                                <th>電子郵件</th>
                                <th>註冊方式</th>
                                <th>註冊時間</th>
                                <th>狀態</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>user_1234</td>
                                <td>張小明</td>
                                <td>zhang@example.com</td>
                                <td><span class="admin-badge">電子郵件</span></td>
                                <td>2023-05-15 14:30</td>
                                <td><span class="admin-badge active">活躍</span></td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>user_1235</td>
                                <td>李小華</td>
                                <td>li@example.com</td>
                                <td><span class="admin-badge social">Google</span></td>
                                <td>2023-05-14 09:45</td>
                                <td><span class="admin-badge active">活躍</span></td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="admin-pagination">
                        <div class="admin-pagination-item">
                            <i class="fas fa-chevron-left"></i>
                        </div>
                        <div class="admin-pagination-item active">1</div>
                        <div class="admin-pagination-item">2</div>
                        <div class="admin-pagination-item">3</div>
                        <div class="admin-pagination-item">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 任務管理內容 -->
            <div id="tasks-content" style="display: none;">
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">任務管理</h2>
                        <button class="btn btn-primary">新增任務</button>
                    </div>
                    
                    <div class="admin-search">
                        <input type="text" class="admin-search-input" placeholder="搜索任務...">
                        <button class="admin-search-btn"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <div class="admin-filters">
                        <select class="admin-filter-select">
                            <option value="">狀態</option>
                            <option value="completed">已完成</option>
                            <option value="in_progress">進行中</option>
                            <option value="pending">待處理</option>
                        </select>
                        
                        <select class="admin-filter-select">
                            <option value="">用戶</option>
                            <option value="user1">張小明</option>
                            <option value="user2">李小華</option>
                            <option value="user3">王大力</option>
                        </select>
                    </div>
                    
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>任務名稱</th>
                                <th>用戶</th>
                                <th>創建時間</th>
                                <th>狀態</th>
                                <th>番茄鐘數</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>task_2345</td>
                                <td>完成網頁設計項目</td>
                                <td>張小明</td>
                                <td>2023-05-15 16:30</td>
                                <td><span class="admin-badge completed">已完成</span></td>
                                <td>4</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>task_2346</td>
                                <td>學習JavaScript基礎</td>
                                <td>李小華</td>
                                <td>2023-05-15 15:45</td>
                                <td><span class="admin-badge in-progress">進行中</span></td>
                                <td>3</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                        <div class="admin-action-btn">
                                            <i class="fas fa-edit"></i>
                                        </div>
                                        <div class="admin-action-btn delete">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="admin-pagination">
                        <div class="admin-pagination-item">
                            <i class="fas fa-chevron-left"></i>
                        </div>
                        <div class="admin-pagination-item active">1</div>
                        <div class="admin-pagination-item">2</div>
                        <div class="admin-pagination-item">3</div>
                        <div class="admin-pagination-item">
                            <i class="fas fa-chevron-right"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 統計分析內容 -->
            <div id="stats-content" style="display: none;">
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">統計分析</h2>
                        <div>
                            <select class="admin-filter-select">
                                <option value="week">本週</option>
                                <option value="month">本月</option>
                                <option value="year">今年</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="height: 300px; background-color: #f5f5f5; display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                        <p>這裡將顯示統計圖表</p>
                    </div>
                    
                    <div class="admin-stats">
                        <div class="admin-stat-card">
                            <div class="admin-stat-content">
                                <div class="admin-stat-value">4.2小時</div>
                                <div class="admin-stat-label">平均專注時間</div>
                            </div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <div class="admin-stat-content">
                                <div class="admin-stat-value">78%</div>
                                <div class="admin-stat-label">任務完成率</div>
                            </div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <div class="admin-stat-content">
                                <div class="admin-stat-value">23分鐘</div>
                                <div class="admin-stat-label">平均休息時間</div>
                            </div>
                        </div>
                        
                        <div class="admin-stat-card">
                            <div class="admin-stat-content">
                                <div class="admin-stat-value">12.5</div>
                                <div class="admin-stat-label">每週平均番茄鐘數</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 系統設置內容 -->
            <div id="settings-content" style="display: none;">
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">系統設置</h2>
                        <button class="btn btn-primary">保存設置</button>
                    </div>
                    
                    <div class="settings-section">
                        <h3 class="settings-section-title">基本設置</h3>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">網站名稱</div>
                            <input type="text" class="settings-input" value="番茄鐘">
                        </div>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">網站描述</div>
                            <textarea class="settings-textarea">幫助您提高工作效率的番茄鐘應用</textarea>
                        </div>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">默認語言</div>
                            <select class="settings-select">
                                <option value="zh-TW">繁體中文</option>
                                <option value="en">English</option>
                                <option value="zh-CN">简体中文</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3 class="settings-section-title">番茄鐘設置</h3>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">默認專注時間 (分鐘)</div>
                            <input type="number" class="settings-input" value="25">
                        </div>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">默認短休息時間 (分鐘)</div>
                            <input type="number" class="settings-input" value="5">
                        </div>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">默認長休息時間 (分鐘)</div>
                            <input type="number" class="settings-input" value="15">
                        </div>
                        
                        <div class="settings-item">
                            <div class="settings-item-label">長休息間隔 (番茄鐘數)</div>
                            <input type="number" class="settings-input" value="4">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 系統日誌內容 -->
            <div id="logs-content" style="display: none;">
                <div class="admin-card">
                    <div class="admin-card-header">
                        <h2 class="admin-card-title">系統日誌</h2>
                        <button class="btn btn-outline">清空日誌</button>
                    </div>
                    
                    <div class="admin-filters">
                        <select class="admin-filter-select">
                            <option value="">日誌類型</option>
                            <option value="info">信息</option>
                            <option value="warning">警告</option>
                            <option value="error">錯誤</option>
                        </select>
                        
                        <select class="admin-filter-select">
                            <option value="">時間範圍</option>
                            <option value="today">今天</option>
                            <option value="week">本週</option>
                            <option value="month">本月</option>
                        </select>
                    </div>
                    
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>類型</th>
                                <th>訊息</th>
                                <th>時間</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>log_001</td>
                                <td><span class="admin-badge info">信息</span></td>
                                <td>系統啟動成功</td>
                                <td>2023-05-15 08:00:00</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>log_002</td>
                                <td><span class="admin-badge warning">警告</span></td>
                                <td>用戶登入嘗試失敗</td>
                                <td>2023-05-15 09:15:30</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>log_003</td>
                                <td><span class="admin-badge error">錯誤</span></td>
                                <td>數據庫連接失敗</td>
                                <td>2023-05-15 10:20:15</td>
                                <td>
                                    <div class="admin-table-actions">
                                        <div class="admin-action-btn">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 檢查管理員登入狀態
            if (!PomodoroApp.isAdmin()) {
                window.location.href = 'admin-login.html';
                return;
            }
            
            // 獲取 URL 參數
            const urlParams = new URLSearchParams(window.location.search);
            const pageFromUrl = urlParams.get('page');
            
            // 深色模式切換
            const darkModeToggle = document.getElementById('darkModeToggle');
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            darkModeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDark);
                this.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            });
            
            // 登出按鈕點擊事件
            const logoutBtn = document.getElementById('adminLogout');
            logoutBtn.addEventListener('click', function() {
                if (confirm('確定要登出管理後台嗎？')) {
                    PomodoroApp.adminLogout();
                }
            });
            
            // 隱藏所有內容區域的輔助函數
            function hideAllContentSections() {
                const contentSections = [
                    'dashboard-content',
                    'users-content',
                    'tasks-content',
                    'stats-content',
                    'settings-content',
                    'logs-content'
                ];
                
                contentSections.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.style.display = 'none';
                    }
                });
            }
            
            // 從 URL 參數中獲取要顯示的頁面
            const menuItems = document.querySelectorAll('.admin-menu-item');
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    // 移除所有活動狀態
                    menuItems.forEach(menuItem => {
                        menuItem.classList.remove('active');
                    });
                    
                    // 添加當前項的活動狀態
                    this.classList.add('active');
                    
                    // 獲取頁面名稱
                    const page = this.dataset.page;
                    
                    // 更新頁面標題
                    document.querySelector('.admin-title').textContent = this.textContent.trim();
                    
                    // 隱藏所有內容區域
                    hideAllContentSections();
                    
                    // 顯示對應的內容區域
                    const contentId = `${page}-content`;
                    const contentSection = document.getElementById(contentId);
                    if (contentSection) {
                        contentSection.style.display = 'block';
                    }
                    
                    // 根據頁面加載數據
                    switch (page) {
                        case 'dashboard':
                            loadDashboard();
                            break;
                        case 'users':
                            loadUsers();
                            break;
                        case 'tasks':
                            loadTasks();
                            break;
                        case 'stats':
                            loadStats();
                            break;
                        case 'settings':
                            loadSettings();
                            break;
                        case 'logs':
                            loadLogs();
                            break;
                    }
                    
                    // 更新 URL 參數
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('page', page);
                    window.history.pushState({}, '', newUrl);
                });
            });
            
            // 載入儀表板數據
            function loadDashboard() {
                // 這裡應該從後端 API 獲取儀表板數據
                console.log('載入儀表板數據');
                
                // 綁定儀表板頁面的「查看全部」按鈕事件
                setupDashboardActions();
            }
            
            // 為儀表板頁面的「查看全部」按鈕添加事件處理
            function setupDashboardActions() {
                const dashboardContent = document.getElementById('dashboard-content');
                
                // 獲取所有「查看全部」按鈕
                const viewAllButtons = dashboardContent.querySelectorAll('.btn.btn-outline');
                
                viewAllButtons.forEach((btn, index) => {
                    btn.addEventListener('click', function() {
                        // 根據按鈕位置判斷是哪個「查看全部」按鈕
                        if (index === 0) {
                            // 最近註冊用戶的「查看全部」按鈕
                            // 切換到用戶管理頁面
                            document.querySelector('.admin-menu-item[data-page="users"]').click();
                        } else if (index === 1) {
                            // 最近完成的任務的「查看全部」按鈕
                            // 切換到任務管理頁面
                            document.querySelector('.admin-menu-item[data-page="tasks"]').click();
                        }
                    });
                });
            }
            
            // 載入用戶管理頁面
            function loadUsers() {
                // 這裡應該從後端 API 獲取用戶數據
                console.log('載入用戶管理頁面');
                
                // 為用戶管理頁面的操作按鈕添加事件處理
                setupUserActions();
                
                // 設置分頁功能
                setupUserPagination();
            }
            
            // 為用戶管理頁面的操作按鈕添加事件處理
            function setupUserActions() {
                const userContent = document.getElementById('users-content');
                
                // 查看用戶按鈕
                const viewButtons = userContent.querySelectorAll('.admin-action-btn .fa-eye');
                viewButtons.forEach(btn => {
                    btn.parentElement.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const userId = row.cells[0].textContent;
                        const userName = row.cells[1].textContent;
                        const email = row.cells[2].textContent;
                        const registerType = row.cells[3].textContent.trim();
                        const registerTime = row.cells[4].textContent;
                        const status = row.cells[5].textContent.trim();
                        
                        // 創建用戶詳情模態框
                        showUserDetails(userId, userName, email, registerType, registerTime, status);
                    });
                });
                
                // 編輯用戶按鈕
                const editButtons = userContent.querySelectorAll('.admin-action-btn .fa-edit');
                editButtons.forEach(btn => {
                    btn.parentElement.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const userId = row.cells[0].textContent;
                        const userName = row.cells[1].textContent;
                        const email = row.cells[2].textContent;
                        
                        // 創建編輯用戶模態框
                        showEditUserForm(userId, userName, email);
                    });
                });
                
                // 刪除用戶按鈕
                const deleteButtons = userContent.querySelectorAll('.admin-action-btn.delete');
                deleteButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const userId = row.cells[0].textContent;
                        const userName = row.cells[1].textContent;
                        
                        if (confirm(`確定要刪除用戶 ${userName} (${userId}) 嗎？`)) {
                            // 在實際應用中，這裡應該調用 API 刪除用戶
                            console.log(`刪除用戶: ${userId}`);
                            
                            // 模擬刪除成功
                            row.remove();
                            alert(`用戶 ${userName} 已成功刪除`);
                        }
                    });
                });
                
                // 新增用戶按鈕
                const addUserBtn = userContent.querySelector('.btn-primary');
                if (addUserBtn) {
                    addUserBtn.addEventListener('click', function() {
                        showAddUserForm();
                    });
                }
                
                // 搜索按鈕
                const searchBtn = userContent.querySelector('.admin-search-btn');
                if (searchBtn) {
                    searchBtn.addEventListener('click', function() {
                        const searchInput = userContent.querySelector('.admin-search-input');
                        const searchValue = searchInput.value.trim();
                        
                        if (searchValue) {
                            // 在實際應用中，這裡應該調用 API 進行搜索
                            console.log('搜索用戶:', searchValue);
                            alert(`搜索: ${searchValue} (功能尚未實現，但已正確綁定事件)`);
                        }
                    });
                }
                
                // 篩選下拉框
                const filterSelects = userContent.querySelectorAll('.admin-filter-select');
                filterSelects.forEach(select => {
                    select.addEventListener('change', function() {
                        // 在實際應用中，這裡應該調用 API 進行篩選
                        console.log('篩選條件變更:', this.value);
                        alert(`篩選條件: ${this.value} (功能尚未實現，但已正確綁定事件)`);
                    });
                });
            }
            
            // 設置分頁功能
            function setupUserPagination() {
                const userContent = document.getElementById('users-content');
                const paginationItems = userContent.querySelectorAll('.admin-pagination-item');
                
                paginationItems.forEach(item => {
                    item.addEventListener('click', function() {
                        // 檢查是否已經是活躍頁
                        if (this.classList.contains('active') || (this.querySelector('i') && this.querySelector('i').classList.contains('fa-chevron-left') && this.classList.contains('disabled'))) {
                            return;
                        }
                        
                        // 更新活躍頁
                        paginationItems.forEach(i => i.classList.remove('active'));
                        
                        // 處理上一頁/下一頁按鈕
                        if (this.querySelector('i') && this.querySelector('i').classList.contains('fa-chevron-left')) {
                            // 上一頁
                            const activePage = userContent.querySelector('.admin-pagination-item.active');
                            if (activePage && activePage.previousElementSibling && !activePage.previousElementSibling.querySelector('i')) {
                                activePage.previousElementSibling.classList.add('active');
                                simulatePageChange(activePage.previousElementSibling.textContent);
                            }
                        } else if (this.querySelector('i') && this.querySelector('i').classList.contains('fa-chevron-right')) {
                            // 下一頁
                            const activePage = userContent.querySelector('.admin-pagination-item.active');
                            if (activePage && activePage.nextElementSibling && !activePage.nextElementSibling.querySelector('i')) {
                                activePage.nextElementSibling.classList.add('active');
                                simulatePageChange(activePage.nextElementSibling.textContent);
                            }
                        } else {
                            // 直接點擊頁碼
                            this.classList.add('active');
                            simulatePageChange(this.textContent);
                        }
                        
                        // 更新上一頁/下一頁按鈕狀態
                        updatePaginationState();
                    });
                });
                
                // 初始化分頁狀態
                updatePaginationState();
            }
            
            // 更新分頁按鈕狀態
            function updatePaginationState() {
                const userContent = document.getElementById('users-content');
                const prevBtn = userContent.querySelector('.admin-pagination-item i.fa-chevron-left').parentElement;
                const nextBtn = userContent.querySelector('.admin-pagination-item i.fa-chevron-right').parentElement;
                const activePage = userContent.querySelector('.admin-pagination-item.active');
                
                // 如果是第一頁，禁用上一頁按鈕
                if (activePage && !activePage.previousElementSibling.querySelector('i')) {
                    prevBtn.classList.remove('disabled');
                } else {
                    prevBtn.classList.add('disabled');
                }
                
                // 如果是最後一頁，禁用下一頁按鈕
                if (activePage && !activePage.nextElementSibling.querySelector('i')) {
                    nextBtn.classList.remove('disabled');
                } else {
                    nextBtn.classList.add('disabled');
                }
            }
            
            // 模擬頁面切換
            function simulatePageChange(page) {
                // 在實際應用中，這裡應該調用 API 獲取對應頁碼的數據
                console.log(`切換到第 ${page} 頁`);
                
                // 模擬不同頁面的數據
                const userContent = document.getElementById('users-content');
                const tableBody = userContent.querySelector('table tbody');
                
                // 清空表格
                tableBody.innerHTML = '';
                
                // 根據頁碼生成不同的數據
                const pageNum = parseInt(page);
                const startId = (pageNum - 1) * 10 + 1;
                
                for (let i = 0; i < 10; i++) {
                    const userId = `user_${startId + i}`;
                    const row = document.createElement('tr');
                    
                    // 創建單元格
                    row.innerHTML = `
                        <td>${userId}</td>
                        <td>用戶${startId + i}</td>
                        <td>user${startId + i}@example.com</td>
                        <td><span class="admin-badge">${i % 3 === 0 ? '電子郵件' : i % 3 === 1 ? '<span class="admin-badge social">Google</span>' : '<span class="admin-badge social">Facebook</span>'}</span></td>
                        <td>2023-05-${15 - i} ${10 + i}:${30 - i}</td>
                        <td><span class="admin-badge ${i % 2 === 0 ? 'active' : 'inactive'}">${i % 2 === 0 ? '活躍' : '非活躍'}</span></td>
                        <td>
                            <div class="admin-table-actions">
                                <div class="admin-action-btn">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="admin-action-btn">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="admin-action-btn delete">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                }
                
                // 重新綁定事件
                setupUserActions();
            }
            
            // 顯示用戶詳情
            function showUserDetails(userId, userName, email, registerType, registerTime, status) {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>用戶詳情</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">ID</div>
                                <div class="admin-detail-value">${userId}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">名稱</div>
                                <div class="admin-detail-value">${userName}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">電子郵件</div>
                                <div class="admin-detail-value">${email}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">註冊方式</div>
                                <div class="admin-detail-value">${registerType}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">註冊時間</div>
                                <div class="admin-detail-value">${registerTime}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">狀態</div>
                                <div class="admin-detail-value">${status}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">最後登入</div>
                                <div class="admin-detail-value">2023-05-15 14:30</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">完成任務數</div>
                                <div class="admin-detail-value">24</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">總番茄鐘數</div>
                                <div class="admin-detail-value">78</div>
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">關閉</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
            
            // 顯示編輯用戶表單
            function showEditUserForm(userId, userName, email) {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>編輯用戶</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="form-group">
                                <label class="form-label">ID</label>
                                <input type="text" class="form-input" value="${userId}" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">名稱</label>
                                <input type="text" class="form-input" value="${userName}" id="edit-name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">電子郵件</label>
                                <input type="email" class="form-input" value="${email}" id="edit-email">
                            </div>
                            <div class="form-group">
                                <label class="form-label">狀態</label>
                                <select class="form-input" id="edit-status">
                                    <option value="active">活躍</option>
                                    <option value="inactive">非活躍</option>
                                </select>
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">取消</button>
                            <button class="btn btn-primary" id="save-user-btn">保存</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
                
                // 綁定保存按鈕事件
                const saveBtn = modal.querySelector('#save-user-btn');
                saveBtn.addEventListener('click', function() {
                    const newName = modal.querySelector('#edit-name').value.trim();
                    const newEmail = modal.querySelector('#edit-email').value.trim();
                    const newStatus = modal.querySelector('#edit-status').value;
                    
                    if (!newName || !newEmail) {
                        alert('請填寫所有必填欄位');
                        return;
                    }
                    
                    // 在實際應用中，這裡應該調用 API 更新用戶資料
                    console.log(`更新用戶: ${userId}`, {
                        name: newName,
                        email: newEmail,
                        status: newStatus
                    });
                    
                    // 模擬更新成功
                    alert(`用戶 ${userId} 資料已更新`);
                    modal.remove();
                    
                    // 更新表格中的用戶資料
                    const userContent = document.getElementById('users-content');
                    const rows = userContent.querySelectorAll('table tbody tr');
                    rows.forEach(row => {
                        if (row.cells[0].textContent === userId) {
                            row.cells[1].textContent = newName;
                            row.cells[2].textContent = newEmail;
                            row.cells[5].innerHTML = `<span class="admin-badge ${newStatus === 'active' ? 'active' : 'inactive'}">${newStatus === 'active' ? '活躍' : '非活躍'}</span>`;
                        }
                    });
                });
            }
            
            // 顯示新增用戶表單
            function showAddUserForm() {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>新增用戶</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="form-group">
                                <label class="form-label">名稱</label>
                                <input type="text" class="form-input" id="add-name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">電子郵件</label>
                                <input type="email" class="form-input" id="add-email">
                            </div>
                            <div class="form-group">
                                <label class="form-label">密碼</label>
                                <input type="password" class="form-input" id="add-password">
                            </div>
                            <div class="form-group">
                                <label class="form-label">確認密碼</label>
                                <input type="password" class="form-input" id="add-confirm-password">
                            </div>
                            <div class="form-group">
                                <label class="form-label">註冊方式</label>
                                <select class="form-input" id="add-register-type">
                                    <option value="email">電子郵件</option>
                                    <option value="google">Google</option>
                                    <option value="facebook">Facebook</option>
                                    <option value="apple">Apple</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">狀態</label>
                                <select class="form-input" id="add-status">
                                    <option value="active">活躍</option>
                                    <option value="inactive">非活躍</option>
                                </select>
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">取消</button>
                            <button class="btn btn-primary" id="add-user-btn">新增</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
                
                // 綁定新增按鈕事件
                const addBtn = modal.querySelector('#add-user-btn');
                addBtn.addEventListener('click', function() {
                    const name = modal.querySelector('#add-name').value.trim();
                    const email = modal.querySelector('#add-email').value.trim();
                    const password = modal.querySelector('#add-password').value;
                    const confirmPassword = modal.querySelector('#add-confirm-password').value;
                    const registerType = modal.querySelector('#add-register-type').value;
                    const status = modal.querySelector('#add-status').value;
                    
                    if (!name || !email || !password) {
                        alert('請填寫所有必填欄位');
                        return;
                    }
                    
                    if (password !== confirmPassword) {
                        alert('兩次輸入的密碼不一致');
                        return;
                    }
                    
                    // 在實際應用中，這裡應該調用 API 新增用戶
                    console.log('新增用戶:', {
                        name,
                        email,
                        password,
                        registerType,
                        status
                    });
                    
                    // 模擬新增成功
                    const userId = `user_${Math.floor(Math.random() * 10000)}`;
                    alert(`用戶 ${name} 已成功新增，ID: ${userId}`);
                    modal.remove();
                    
                    // 新增用戶到表格
                    const userContent = document.getElementById('users-content');
                    const tableBody = userContent.querySelector('table tbody');
                    const now = new Date();
                    const dateStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${userId}</td>
                        <td>${name}</td>
                        <td>${email}</td>
                        <td><span class="admin-badge ${registerType !== 'email' ? 'social' : ''}">${registerType === 'email' ? '電子郵件' : registerType === 'google' ? 'Google' : registerType === 'facebook' ? 'Facebook' : 'Apple'}</span></td>
                        <td>${dateStr}</td>
                        <td><span class="admin-badge ${status === 'active' ? 'active' : 'inactive'}">${status === 'active' ? '活躍' : '非活躍'}</span></td>
                        <td>
                            <div class="admin-table-actions">
                                <div class="admin-action-btn">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="admin-action-btn">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="admin-action-btn delete">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        </td>
                    `;
                    
                    tableBody.insertBefore(row, tableBody.firstChild);
                    
                    // 重新綁定事件
                    setupUserActions();
                });
            }
            
            // 載入任務管理頁面
            function loadTasks() {
                // 這裡應該從後端 API 獲取任務數據
                console.log('載入任務管理頁面');
                
                // 為任務管理頁面的操作按鈕添加事件處理
                setupTaskActions();
                
                // 設置分頁功能
                setupTaskPagination();
            }
            
            // 為任務管理頁面的操作按鈕添加事件處理
            function setupTaskActions() {
                const tasksContent = document.getElementById('tasks-content');
                
                // 查看任務按鈕
                const viewButtons = tasksContent.querySelectorAll('.admin-action-btn .fa-eye');
                viewButtons.forEach(btn => {
                    btn.parentElement.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const taskId = row.cells[0].textContent;
                        const taskName = row.cells[1].textContent;
                        const userName = row.cells[2].textContent;
                        const createTime = row.cells[3].textContent;
                        const status = row.cells[4].textContent.trim();
                        const pomodoros = row.cells[5].textContent;
                        
                        // 創建任務詳情模態框
                        showTaskDetails(taskId, taskName, userName, createTime, status, pomodoros);
                    });
                });
                
                // 編輯任務按鈕
                const editButtons = tasksContent.querySelectorAll('.admin-action-btn .fa-edit');
                editButtons.forEach(btn => {
                    btn.parentElement.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const taskId = row.cells[0].textContent;
                        const taskName = row.cells[1].textContent;
                        const userName = row.cells[2].textContent;
                        
                        // 創建編輯任務模態框
                        showEditTaskForm(taskId, taskName, userName);
                    });
                });
                
                // 刪除任務按鈕
                const deleteButtons = tasksContent.querySelectorAll('.admin-action-btn.delete');
                deleteButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const taskId = row.cells[0].textContent;
                        const taskName = row.cells[1].textContent;
                        
                        if (confirm(`確定要刪除任務 ${taskName} (${taskId}) 嗎？`)) {
                            // 在實際應用中，這裡應該調用 API 刪除任務
                            console.log(`刪除任務: ${taskId}`);
                            
                            // 模擬刪除成功
                            row.remove();
                            alert(`任務 ${taskName} 已成功刪除`);
                        }
                    });
                });
                
                // 新增任務按鈕
                const addTaskBtn = tasksContent.querySelector('.btn-primary');
                if (addTaskBtn) {
                    addTaskBtn.addEventListener('click', function() {
                        showAddTaskForm();
                    });
                }
                
                // 搜索按鈕
                const searchBtn = tasksContent.querySelector('.admin-search-btn');
                if (searchBtn) {
                    searchBtn.addEventListener('click', function() {
                        const searchInput = tasksContent.querySelector('.admin-search-input');
                        const searchValue = searchInput.value.trim();
                        
                        if (searchValue) {
                            // 在實際應用中，這裡應該調用 API 進行搜索
                            console.log('搜索任務:', searchValue);
                            alert(`搜索: ${searchValue} (功能尚未實現，但已正確綁定事件)`);
                        }
                    });
                }
                
                // 篩選下拉框
                const filterSelects = tasksContent.querySelectorAll('.admin-filter-select');
                filterSelects.forEach(select => {
                    select.addEventListener('change', function() {
                        // 在實際應用中，這裡應該調用 API 進行篩選
                        console.log('篩選條件變更:', this.value);
                        alert(`篩選條件: ${this.value} (功能尚未實現，但已正確綁定事件)`);
                    });
                });
            }
            
            // 設置任務分頁功能
            function setupTaskPagination() {
                const tasksContent = document.getElementById('tasks-content');
                const paginationItems = tasksContent.querySelectorAll('.admin-pagination-item');
                
                paginationItems.forEach(item => {
                    item.addEventListener('click', function() {
                        // 檢查是否已經是活躍頁或禁用狀態
                        if (this.classList.contains('active') || this.classList.contains('disabled')) {
                            return;
                        }
                        
                        // 處理上一頁/下一頁按鈕
                        if (this.querySelector('i') && this.querySelector('i').classList.contains('fa-chevron-left')) {
                            // 上一頁
                            const activePage = tasksContent.querySelector('.admin-pagination-item.active');
                            if (activePage && activePage.previousElementSibling && !activePage.previousElementSibling.querySelector('i')) {
                                paginationItems.forEach(i => i.classList.remove('active'));
                                activePage.previousElementSibling.classList.add('active');
                                simulateTaskPageChange(activePage.previousElementSibling.textContent);
                            }
                        } else if (this.querySelector('i') && this.querySelector('i').classList.contains('fa-chevron-right')) {
                            // 下一頁
                            const activePage = tasksContent.querySelector('.admin-pagination-item.active');
                            if (activePage && activePage.nextElementSibling && !activePage.nextElementSibling.querySelector('i')) {
                                paginationItems.forEach(i => i.classList.remove('active'));
                                activePage.nextElementSibling.classList.add('active');
                                simulateTaskPageChange(activePage.nextElementSibling.textContent);
                            }
                        } else {
                            // 直接點擊頁碼
                            paginationItems.forEach(i => i.classList.remove('active'));
                            this.classList.add('active');
                            simulateTaskPageChange(this.textContent);
                        }
                        
                        // 更新上一頁/下一頁按鈕狀態
                        updateTaskPaginationState();
                    });
                });
                
                // 初始化分頁狀態
                updateTaskPaginationState();
            }
            
            // 更新任務分頁按鈕狀態
            function updateTaskPaginationState() {
                const tasksContent = document.getElementById('tasks-content');
                const prevBtn = tasksContent.querySelector('.admin-pagination-item i.fa-chevron-left').parentElement;
                const nextBtn = tasksContent.querySelector('.admin-pagination-item i.fa-chevron-right').parentElement;
                const activePage = tasksContent.querySelector('.admin-pagination-item.active');
                
                if (!activePage) return;
                
                // 如果是第一頁，禁用上一頁按鈕
                if (activePage.previousElementSibling && !activePage.previousElementSibling.querySelector('i')) {
                    prevBtn.classList.remove('disabled');
                } else {
                    prevBtn.classList.add('disabled');
                }
                
                // 如果是最後一頁，禁用下一頁按鈕
                if (activePage.nextElementSibling && !activePage.nextElementSibling.querySelector('i')) {
                    nextBtn.classList.remove('disabled');
                } else {
                    nextBtn.classList.add('disabled');
                }
            }
            
            // 模擬任務頁面切換
            function simulateTaskPageChange(page) {
                // 在實際應用中，這裡應該調用 API 獲取對應頁碼的數據
                console.log(`切換到任務第 ${page} 頁`);
                
                // 模擬不同頁面的數據
                const tasksContent = document.getElementById('tasks-content');
                const tableBody = tasksContent.querySelector('table tbody');
                
                // 清空表格
                tableBody.innerHTML = '';
                
                // 根據頁碼生成不同的數據
                const pageNum = parseInt(page);
                const startId = (pageNum - 1) * 10 + 1;
                
                for (let i = 0; i < 10; i++) {
                    const taskId = `task_${startId + i}`;
                    const row = document.createElement('tr');
                    
                    // 創建單元格
                    row.innerHTML = `
                        <td>${taskId}</td>
                        <td>任務${startId + i}</td>
                        <td>用戶${i % 3 + 1}</td>
                        <td>2023-05-${15 - i} ${10 + i}:${30 - i}</td>
                        <td><span class="admin-badge ${i % 3 === 0 ? 'completed' : i % 3 === 1 ? 'in-progress' : 'pending'}">${i % 3 === 0 ? '已完成' : i % 3 === 1 ? '進行中' : '待處理'}</span></td>
                        <td>${i % 5 + 1}</td>
                        <td>
                            <div class="admin-table-actions">
                                <div class="admin-action-btn">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="admin-action-btn">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="admin-action-btn delete">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                }
                
                // 重新綁定事件
                setupTaskActions();
            }
            
            // 顯示任務詳情
            function showTaskDetails(taskId, taskName, userName, createTime, status, pomodoros) {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>任務詳情</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">ID</div>
                                <div class="admin-detail-value">${taskId}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">任務名稱</div>
                                <div class="admin-detail-value">${taskName}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">用戶</div>
                                <div class="admin-detail-value">${userName}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">創建時間</div>
                                <div class="admin-detail-value">${createTime}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">狀態</div>
                                <div class="admin-detail-value">${status}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">番茄鐘數</div>
                                <div class="admin-detail-value">${pomodoros}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">預計完成時間</div>
                                <div class="admin-detail-value">2023-05-20</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">優先級</div>
                                <div class="admin-detail-value">中</div>
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">關閉</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
            
            // 顯示編輯任務表單
            function showEditTaskForm(taskId, taskName, userName) {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>編輯任務</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="form-group">
                                <label class="form-label">ID</label>
                                <input type="text" class="form-input" value="${taskId}" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">任務名稱</label>
                                <input type="text" class="form-input" value="${taskName}" id="edit-task-name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">用戶</label>
                                <input type="text" class="form-input" value="${userName}" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">狀態</label>
                                <select class="form-input" id="edit-task-status">
                                    <option value="completed">已完成</option>
                                    <option value="in_progress">進行中</option>
                                    <option value="pending">待處理</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">番茄鐘數</label>
                                <input type="number" class="form-input" value="4" id="edit-task-pomodoros">
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">取消</button>
                            <button class="btn btn-primary" id="save-task-btn">保存</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
                
                // 綁定保存按鈕事件
                const saveBtn = modal.querySelector('#save-task-btn');
                saveBtn.addEventListener('click', function() {
                    const newName = modal.querySelector('#edit-task-name').value.trim();
                    const newStatus = modal.querySelector('#edit-task-status').value;
                    const newPomodoros = modal.querySelector('#edit-task-pomodoros').value;
                    
                    if (!newName) {
                        alert('請填寫任務名稱');
                        return;
                    }
                    
                    // 在實際應用中，這裡應該調用 API 更新任務資料
                    console.log(`更新任務: ${taskId}`, {
                        name: newName,
                        status: newStatus,
                        pomodoros: newPomodoros
                    });
                    
                    // 模擬更新成功
                    alert(`任務 ${taskId} 資料已更新`);
                    modal.remove();
                    
                    // 更新表格中的任務資料
                    const tasksContent = document.getElementById('tasks-content');
                    const rows = tasksContent.querySelectorAll('table tbody tr');
                    rows.forEach(row => {
                        if (row.cells[0].textContent === taskId) {
                            row.cells[1].textContent = newName;
                            row.cells[4].innerHTML = `<span class="admin-badge ${newStatus === 'completed' ? 'completed' : newStatus === 'in_progress' ? 'in-progress' : 'pending'}">${newStatus === 'completed' ? '已完成' : newStatus === 'in_progress' ? '進行中' : '待處理'}</span>`;
                            row.cells[5].textContent = newPomodoros;
                        }
                    });
                });
            }
            
            // 顯示新增任務表單
            function showAddTaskForm() {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>新增任務</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="form-group">
                                <label class="form-label">任務名稱</label>
                                <input type="text" class="form-input" id="add-task-name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">用戶</label>
                                <select class="form-input" id="add-task-user">
                                    <option value="user1">張小明</option>
                                    <option value="user2">李小華</option>
                                    <option value="user3">王大力</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">狀態</label>
                                <select class="form-input" id="add-task-status">
                                    <option value="pending">待處理</option>
                                    <option value="in_progress">進行中</option>
                                    <option value="completed">已完成</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">番茄鐘數</label>
                                <input type="number" class="form-input" value="4" id="add-task-pomodoros">
                            </div>
                            <div class="form-group">
                                <label class="form-label">優先級</label>
                                <select class="form-input" id="add-task-priority">
                                    <option value="low">低</option>
                                    <option value="medium">中</option>
                                    <option value="high">高</option>
                                </select>
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">取消</button>
                            <button class="btn btn-primary" id="add-task-btn">新增</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
                
                // 綁定新增按鈕事件
                const addBtn = modal.querySelector('#add-task-btn');
                addBtn.addEventListener('click', function() {
                    const name = modal.querySelector('#add-task-name').value.trim();
                    const user = modal.querySelector('#add-task-user');
                    const userName = user.options[user.selectedIndex].text;
                    const status = modal.querySelector('#add-task-status').value;
                    const pomodoros = modal.querySelector('#add-task-pomodoros').value;
                    
                    if (!name) {
                        alert('請填寫任務名稱');
                        return;
                    }
                    
                    // 在實際應用中，這裡應該調用 API 新增任務
                    console.log('新增任務:', {
                        name,
                        user: user.value,
                        status,
                        pomodoros
                    });
                    
                    // 模擬新增成功
                    const taskId = `task_${Math.floor(Math.random() * 10000)}`;
                    alert(`任務 ${name} 已成功新增，ID: ${taskId}`);
                    modal.remove();
                    
                    // 新增任務到表格
                    const tasksContent = document.getElementById('tasks-content');
                    const tableBody = tasksContent.querySelector('table tbody');
                    const now = new Date();
                    const dateStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${taskId}</td>
                        <td>${name}</td>
                        <td>${userName}</td>
                        <td>${dateStr}</td>
                        <td><span class="admin-badge ${status === 'completed' ? 'completed' : status === 'in_progress' ? 'in-progress' : 'pending'}">${status === 'completed' ? '已完成' : status === 'in_progress' ? '進行中' : '待處理'}</span></td>
                        <td>${pomodoros}</td>
                        <td>
                            <div class="admin-table-actions">
                                <div class="admin-action-btn">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="admin-action-btn">
                                    <i class="fas fa-edit"></i>
                                </div>
                                <div class="admin-action-btn delete">
                                    <i class="fas fa-trash"></i>
                                </div>
                            </div>
                        </td>
                    `;
                    
                    tableBody.insertBefore(row, tableBody.firstChild);
                    
                    // 重新綁定事件
                    setupTaskActions();
                });
            }
            
            // 載入統計分析頁面
            function loadStats() {
                // 這裡應該從後端 API 獲取統計數據
                console.log('載入統計分析頁面');
                
                // 設置統計分析頁面的篩選功能
                setupStatsFilters();
            }
            
            // 設置統計分析頁面的篩選功能
            function setupStatsFilters() {
                const statsContent = document.getElementById('stats-content');
                const filterSelect = statsContent.querySelector('.admin-filter-select');
                
                if (filterSelect) {
                    filterSelect.addEventListener('change', function() {
                        // 在實際應用中，這裡應該調用 API 獲取不同時間範圍的統計數據
                        console.log('統計時間範圍變更:', this.value);
                        alert(`時間範圍: ${this.value} (功能尚未實現，但已正確綁定事件)`);
                    });
                }
            }
            
            // 載入系統設置頁面
            function loadSettings() {
                // 這裡應該從後端 API 獲取系統設置
                console.log('載入系統設置頁面');
                
                // 設置系統設置頁面的保存按鈕功能
                setupSettingsSave();
            }
            
            // 設置系統設置頁面的保存按鈕功能
            function setupSettingsSave() {
                const settingsContent = document.getElementById('settings-content');
                const saveBtn = settingsContent.querySelector('.btn-primary');
                
                if (saveBtn) {
                    saveBtn.addEventListener('click', function() {
                        // 收集所有設置項的值
                        const websiteName = settingsContent.querySelector('.settings-input[value="番茄鐘"]').value;
                        const websiteDesc = settingsContent.querySelector('.settings-textarea').value;
                        const language = settingsContent.querySelector('.settings-select').value;
                        const focusTime = settingsContent.querySelectorAll('.settings-input[type="number"]')[0].value;
                        const shortBreakTime = settingsContent.querySelectorAll('.settings-input[type="number"]')[1].value;
                        const longBreakTime = settingsContent.querySelectorAll('.settings-input[type="number"]')[2].value;
                        const longBreakInterval = settingsContent.querySelectorAll('.settings-input[type="number"]')[3].value;
                        
                        // 在實際應用中，這裡應該調用 API 保存系統設置
                        console.log('保存系統設置:', {
                            websiteName,
                            websiteDesc,
                            language,
                            focusTime,
                            shortBreakTime,
                            longBreakTime,
                            longBreakInterval
                        });
                        
                        // 模擬保存成功
                        alert('系統設置已成功保存');
                    });
                }
            }
            
            // 載入系統日誌頁面
            function loadLogs() {
                // 這裡應該從後端 API 獲取系統日誌
                console.log('載入系統日誌頁面');
                
                // 設置系統日誌頁面的功能
                setupLogsActions();
            }
            
            // 設置系統日誌頁面的功能
            function setupLogsActions() {
                const logsContent = document.getElementById('logs-content');
                
                // 清空日誌按鈕
                const clearBtn = logsContent.querySelector('.btn-outline');
                if (clearBtn) {
                    clearBtn.addEventListener('click', function() {
                        if (confirm('確定要清空所有系統日誌嗎？此操作不可恢復。')) {
                            // 在實際應用中，這裡應該調用 API 清空系統日誌
                            console.log('清空系統日誌');
                            
                            // 模擬清空成功
                            const tableBody = logsContent.querySelector('table tbody');
                            tableBody.innerHTML = '';
                            alert('系統日誌已清空');
                        }
                    });
                }
                
                // 查看日誌詳情按鈕
                const viewButtons = logsContent.querySelectorAll('.admin-action-btn .fa-eye');
                viewButtons.forEach(btn => {
                    btn.parentElement.addEventListener('click', function() {
                        const row = this.closest('tr');
                        const logId = row.cells[0].textContent;
                        const logType = row.cells[1].textContent.trim();
                        const logMessage = row.cells[2].textContent;
                        const logTime = row.cells[3].textContent;
                        
                        // 創建日誌詳情模態框
                        showLogDetails(logId, logType, logMessage, logTime);
                    });
                });
                
                // 篩選下拉框
                const filterSelects = logsContent.querySelectorAll('.admin-filter-select');
                filterSelects.forEach(select => {
                    select.addEventListener('change', function() {
                        // 在實際應用中，這裡應該調用 API 進行篩選
                        console.log('日誌篩選條件變更:', this.value);
                        alert(`篩選條件: ${this.value} (功能尚未實現，但已正確綁定事件)`);
                    });
                });
            }
            
            // 顯示日誌詳情
            function showLogDetails(logId, logType, logMessage, logTime) {
                // 創建模態框
                const modal = document.createElement('div');
                modal.className = 'admin-modal';
                modal.innerHTML = `
                    <div class="admin-modal-content">
                        <div class="admin-modal-header">
                            <h2>日誌詳情</h2>
                            <span class="admin-modal-close">&times;</span>
                        </div>
                        <div class="admin-modal-body">
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">ID</div>
                                <div class="admin-detail-value">${logId}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">類型</div>
                                <div class="admin-detail-value">${logType}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">訊息</div>
                                <div class="admin-detail-value">${logMessage}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">時間</div>
                                <div class="admin-detail-value">${logTime}</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">來源</div>
                                <div class="admin-detail-value">系統</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">IP 地址</div>
                                <div class="admin-detail-value">192.168.1.1</div>
                            </div>
                            <div class="admin-detail-item">
                                <div class="admin-detail-label">用戶代理</div>
                                <div class="admin-detail-value">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36</div>
                            </div>
                        </div>
                        <div class="admin-modal-footer">
                            <button class="btn btn-outline admin-modal-close-btn">關閉</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // 綁定關閉按鈕事件
                const closeButtons = modal.querySelectorAll('.admin-modal-close, .admin-modal-close-btn');
                closeButtons.forEach(btn => {
                    btn.addEventListener('click', function() {
                        modal.remove();
                    });
                });
                
                // 點擊模態框外部關閉
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }
            
            // 根據 URL 參數初始化頁面
            if (pageFromUrl) {
                // 找到對應的菜單項並模擬點擊
                const targetMenuItem = document.querySelector(`.admin-menu-item[data-page="${pageFromUrl}"]`);
                if (targetMenuItem) {
                    targetMenuItem.click();
                } else {
                    // 如果找不到對應的菜單項，默認顯示儀表板
                    document.querySelector('.admin-menu-item[data-page="dashboard"]').click();
                }
            } else {
                // 默認顯示儀表板
                document.querySelector('.admin-menu-item[data-page="dashboard"]').click();
            }
        });
    </script>
</body>
</html> 